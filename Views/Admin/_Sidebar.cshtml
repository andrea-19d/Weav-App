<!-- Sidebar -->
<div class="col-md-3 col-lg-2 px-0">
    <div class="sidebar">
        <nav class="nav flex-column py-4">
            <a class="nav-link active" asp-action="Index">
                <iconify-icon icon="mdi:view-dashboard"></iconify-icon>
                Dashboard
            </a>
            <a class="nav-link" asp-action="ProductManagement">
                <iconify-icon icon="mdi:package-variant"></iconify-icon>
                Products
            </a>
            <a class="nav-link" asp-action="OrderPage">
                <iconify-icon icon="mdi:cart-outline"></iconify-icon>
                Orders
            </a>
            <a class="nav-link" asp-action="CustomerPage">
                <iconify-icon icon="mdi:account-group"></iconify-icon>
                Customers
            </a>
            <a class="nav-link" href="#">
                <iconify-icon icon="mdi:tag-outline"></iconify-icon>
                Categories
            </a>
            <a class="nav-link" href="#">
                <iconify-icon icon="mdi:chart-line"></iconify-icon>
                Analytics
            </a>
            <a class="nav-link" href="#">
                <iconify-icon icon="mdi:truck-delivery"></iconify-icon>
                Shipping
            </a>
            <a class="nav-link" href="#">
                <iconify-icon icon="mdi:percent"></iconify-icon>
                Discounts
            </a>
            <a class="nav-link" href="#">
                <iconify-icon icon="mdi:finance"></iconify-icon>
                Reports
            </a>
            <a class="nav-link" href="#">
                <iconify-icon icon="mdi:cog-outline"></iconify-icon>
                Settings
            </a>
        </nav>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const navLinks = document.querySelectorAll(".sidebar .nav-link");

        // Get current path from localStorage (e.g., "/Home/Index")
        const currentPath = localStorage.getItem("activeSidebarLink");
        if (currentPath) {
            navLinks.forEach(link => {
                link.classList.remove("active");
                const href = link.getAttribute("href");
                if (href && href.includes(currentPath)) {
                    link.classList.add("active");
                }
            });
        }

        navLinks.forEach(link => {
            link.addEventListener("click", () => {
                // Remove all active classes
                navLinks.forEach(l => l.classList.remove("active"));

                // Add active class and animation
                link.classList.add("active", "nav-click-animation");

                // Store href path for persistence
                const href = link.getAttribute("href");
                if (href && href !== "#") {
                    localStorage.setItem("activeSidebarLink", href);
                }

                // Animation cleanup
                setTimeout(() => {
                    link.classList.remove("nav-click-animation");
                }, 300);
            });
        });
    });
</script>
